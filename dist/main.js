(()=>{"use strict";function e(e){const t=new Date(e),i=t.getDate().toString();let s="th";return i.endsWith("1")&&1==i.length||i.endsWith("1")&&"1"!=i.startsWith?s="st":i.endsWith("2")&&1==i.length||i.endsWith("2")&&"1"!=i.startsWith?s="nd":(i.endsWith("3")&&1==i.length||i.endsWith("3")&&"1"!=i.startsWith)&&(s="rd"),`${["January","February","March","April","May","June","July","August","September","October","November","December"][t.getMonth()]} ${t.getDate()}${s}, ${t.getFullYear()}`}function t(e,t){localStorage.setItem(e,t)}function i(e){return JSON.parse(localStorage.getItem(e))}function s(){let e=new URL(document.location).searchParams;return parseInt(e.get("id"))||!1}function n(){return!(window.location.pathname.length>1)}class a{constructor(e,t,i,s){this.id=e,this.title=t,this.tasks=i,this.date=s}}class r{constructor(e,t,i,s){this.id=e,this.title=t,this.day=i,this.weeklyId=s}}class l extends HTMLElement{static get observedAttributes(){return["prefix"]}constructor(){super(),this.wrapper=document.getElementById("weekly-section"),this.sectionTitleBaseTpl=document.querySelector(".section-header").innerHTML.toString(),this.cardBaseTpl=document.querySelector(".base-template-card").innerHTML.toString(),this.isSingle=s(),this.isHome=n(),this.weekly={},this.weeklyStorage=i("weekly")?i("weekly"):[],this.formData=[],this.singleWeekly={}}connectedCallback(){console.log(a,"WeeklyConfig"),this.init()}disconnectedCallback(){}attributeChangedCallback(e,t,i){}init(){this.isHome||document.body.classList.add("weekly"),this.sectionTitleBaseTpl&&this.cardBaseTpl&&(this.getOneSingle(),this.compileSection(),this.compileCard(),this.addOneWeekly())}compileSection(){let e;e=this.isHome?"Weekly":this.isSingle?this.singleWeekly.title:"All";const t=this.sectionTitleBaseTpl.replace("{{section_title}}",e);this.wrapper.querySelector(".dynamic.section-header").innerHTML=t}compileCard(){this.isSingle?(this.handleButtons(),this.weeklyStorage.forEach((t=>{if(this.isSingle==t.id){let i=this.cardBaseTpl.replace("{{id}}",t.id);i=i.replace("{{link}}",`/weekly.html?id=${t.id}`),i=i.replace("{{title}}",t.title),i=i.replace("{{date}}",e(t.date)),i=i.replace("{{template}}"," single"),0==t.tasks.length&&(i=i.replace("<ul></ul>","")),this.innerHTML+=i,t.tasks.length>0&&this.compileTasks(t.tasks)}}))):this.weeklyStorage.forEach((t=>{let i=this.cardBaseTpl.replace("{{id}}",t.id);i=i.replace("{{link}}",`/weekly.html?id=${t.id}`),i=i.replace("{{title}}",t.title),i=i.replace("{{date}}",e(t.date)),i=i.replace("{{template}}",""),this.innerHTML+=i}))}compileTasks(e){const t=this.querySelector(".card .card-content>ul"),i=[{monday:e.filter((e=>"monday"==e.day))},{tuesday:e.filter((e=>"tuesday"==e.day))},{wednesday:e.filter((e=>"wednesday"==e.day))},{thursday:e.filter((e=>"thursday"==e.day))},{friday:e.filter((e=>"friday"==e.day))},{saturday:e.filter((e=>"saturday"==e.day))},{sunday:e.filter((e=>"sunday"==e.day))}];let s="";for(let e in i)for(const[n,a]of Object.entries(i[e]))if(a.length>0){s+=`<span class="${n}">${n}</span>`;for(let e of a)s+=`<li>${e.title}</li>`;t.innerHTML=s}}getOneSingle(){this.isSingle&&this.weeklyStorage.forEach(((e,t)=>{this.isSingle==e.id&&(e.storageIndex=t,this.singleWeekly=e)}))}addOneWeekly(){this.isHome||document.querySelector(".button-add").addEventListener("click",(()=>{const e=document.querySelector(".form-wrapper.create");e.classList.add("active"),this.handleForm(e)}))}editOneWeekly(){const e=document.querySelector(".form-wrapper.edit");e.classList.add("active"),this.handleFormEdit(e)}removeOneWeekly(){this.weeklyStorage.forEach(((e,t)=>{this.isSingle==e.id&&(this.weeklyStorage.splice(t,1),this.updateStorage(),window.location="weekly.html")}))}handleButtons(){document.querySelector(".button-list").querySelectorAll(".button").forEach((e=>{e.classList.contains("button-add")?e.classList.add("hidden"):e.classList.remove("hidden"),e.classList.contains("button-remove")&&e.addEventListener("click",(()=>{this.removeOneWeekly()})),e.classList.contains("button-edit")&&e.addEventListener("click",(()=>{this.editOneWeekly()}))}))}handleForm(e){const t=e.querySelectorAll(".form-field");let i=e.querySelector("form");i.addEventListener("submit",(t=>{t.preventDefault();const s=new FormData(i);if(s.get("title").length>2){let t=Date.now();this.weekly=new a(t,s.get("title"),[],Date.now()),i.reset(),e.classList.remove("active"),this.weeklyStorage.push(this.weekly),this.updateStorage()}})),i.addEventListener("formdata",(e=>{const t=e.formData;t.set("title",t.get("title").toLowerCase())})),t.forEach((i=>{const s=i.querySelector(".form-button"),n=i.querySelector(".input");s.addEventListener("click",(i=>{if(i.preventDefault(),n.value.length>2&&"continue"==s.dataset.action){let e=parseInt(s.dataset.index);t[e].classList.remove("active"),t[e+1].classList.add("active")}else e.querySelector('button[type="submit"]').click()}))}))}handleFormEdit(e){const t=e.querySelectorAll(".form-field");let i=e.querySelector("form");i.addEventListener("submit",(t=>{t.preventDefault();const s=new FormData(i);if(s.get("title").length>2){let t=Date.now();const n=this.singleWeekly.tasks.length>0?this.singleWeekly.tasks:[];let a=new r(t,s.get("title"),s.get("day"),this.isSingle);n.push(a),this.singleWeekly.tasks=n,this.weeklyStorage[this.singleWeekly.storageIndex]=this.singleWeekly,i.reset(),e.classList.remove("active"),this.updateStorage()}})),i.addEventListener("formdata",(e=>{const t=e.formData;t.set("title",t.get("title").toLowerCase()),t.set("day",t.get("day").toLowerCase())})),t.forEach((i=>{const s=i.querySelector(".form-button"),n=i.querySelector(".input");s.addEventListener("click",(i=>{if(i.preventDefault(),console.log(n),n.value.length>2&&"continue"==s.dataset.action){let e=parseInt(s.dataset.index);t[e].classList.remove("active"),t[e+1].classList.add("active")}else e.querySelector('button[type="submit"]').click()}))}))}updateStorage(){t("weekly",JSON.stringify(this.weeklyStorage)),window.location.reload()}}customElements.define("weekly-task",l);class o{constructor(e,t,i,s){this.id=e,this.title=t,this.tasks=i,this.date=s}}class c{constructor(e,t,i){this.id=e,this.title=t,this.listId=i}}class d extends HTMLElement{static get observedAttributes(){return["prefix"]}constructor(){super(),this.wrapper=document.getElementById("list-section"),this.sectionTitleBaseTpl=document.querySelector(".section-header").innerHTML.toString(),this.cardBaseTpl=document.querySelector(".base-template-card").innerHTML.toString(),this.isSingle=s(),this.isHome=n(),this.list={},this.listStorage=i("list")?i("list"):[],this.formData=[],this.singleList={}}connectedCallback(){console.log(o,"ListConfig"),this.init()}disconnectedCallback(){}attributeChangedCallback(e,t,i){}init(){this.isHome||document.body.classList.add("lists"),this.sectionTitleBaseTpl&&this.cardBaseTpl&&(this.getOneSingle(),this.compileSection(),this.compileCard(),this.addOneList())}compileSection(){let e;e=this.isHome?"List":this.isSingle?this.singleList.title:"All";const t=this.sectionTitleBaseTpl.replace("{{section_title}}",e);this.wrapper.querySelector(".dynamic.section-header").innerHTML=t}compileCard(){this.isSingle?(this.handleButtons(),this.listStorage.forEach((t=>{if(this.isSingle==t.id){let i=this.cardBaseTpl.replace("{{id}}",t.id);i=i.replace("{{link}}",`/lists.html?id=${t.id}`),i=i.replace("{{title}}",t.title),i=i.replace("{{date}}",e(t.date)),i=i.replace("{{template}}"," single"),0==t.tasks.length&&(i=i.replace("<ul></ul>","")),this.innerHTML+=i,t.tasks.length>0&&this.compileTasks(t.tasks)}}))):this.listStorage.forEach((t=>{let i=this.cardBaseTpl.replace("{{id}}",t.id);i=i.replace("{{link}}",`/lists.html?id=${t.id}`),i=i.replace("{{title}}",t.title),i=i.replace("{{date}}",e(t.date)),i=i.replace("{{template}}",""),this.innerHTML+=i}))}compileTasks(e){const t=this.querySelector(".card .card-content>ul");let i="";for(const t of e)i+=`<li>${t.title}</li>`;t.innerHTML=i}getOneSingle(){this.isSingle&&this.listStorage.forEach(((e,t)=>{this.isSingle==e.id&&(e.storageIndex=t,this.singleList=e)}))}addOneList(){this.isHome||document.querySelector(".button-add").addEventListener("click",(()=>{const e=document.querySelector(".form-wrapper.create");e.classList.add("active"),this.handleForm(e)}))}editOneList(){const e=document.querySelector(".form-wrapper.edit");e.classList.add("active"),this.handleFormEdit(e)}removeOneList(){this.listStorage.forEach(((e,t)=>{this.isSingle==e.id&&(this.listStorage.splice(t,1),this.updateStorage(),window.location="lists.html")}))}handleButtons(){document.querySelector(".button-list").querySelectorAll(".button").forEach((e=>{e.classList.contains("button-add")?e.classList.add("hidden"):e.classList.remove("hidden"),e.classList.contains("button-remove")&&e.addEventListener("click",(()=>{this.removeOneList()})),e.classList.contains("button-edit")&&e.addEventListener("click",(()=>{this.editOneList()}))}))}handleForm(e){const t=e.querySelectorAll(".form-field");let i=e.querySelector("form");i.addEventListener("submit",(t=>{t.preventDefault();const s=new FormData(i);if(s.get("title").length>2){let t=Date.now();this.list=new o(t,s.get("title"),[],Date.now()),i.reset(),e.classList.remove("active"),this.listStorage.push(this.list),this.updateStorage()}})),i.addEventListener("formdata",(e=>{const t=e.formData;t.set("title",t.get("title").toLowerCase())})),t.forEach((i=>{const s=i.querySelector(".form-button"),n=i.querySelector(".input");s.addEventListener("click",(i=>{if(i.preventDefault(),n.value.length>2&&"continue"==s.dataset.action){let e=parseInt(s.dataset.index);t[e].classList.remove("active"),t[e+1].classList.add("active")}else e.querySelector('button[type="submit"]').click()}))}))}handleFormEdit(e){const t=e.querySelectorAll(".form-field");let i=e.querySelector("form");i.addEventListener("submit",(t=>{t.preventDefault();const s=new FormData(i);if(s.get("title").length>2){let t=Date.now();const n=this.singleList.tasks.length>0?this.singleList.tasks:[];let a=new c(t,s.get("title"),this.isSingle);n.push(a),this.singleList.tasks=n,this.listStorage[this.singleList.storageIndex]=this.singleList,i.reset(),e.classList.remove("active"),this.updateStorage()}})),i.addEventListener("formdata",(e=>{const t=e.formData;t.set("title",t.get("title").toLowerCase())})),t.forEach((i=>{const s=i.querySelector(".form-button"),n=i.querySelector(".input");s.addEventListener("click",(i=>{if(i.preventDefault(),console.log(n),n.value.length>2&&"continue"==s.dataset.action){let e=parseInt(s.dataset.index);t[e].classList.remove("active"),t[e+1].classList.add("active")}else e.querySelector('button[type="submit"]').click()}))}))}updateStorage(){t("list",JSON.stringify(this.listStorage)),window.location.reload()}}customElements.define("list-task",d);class h{constructor(e,t,i){this.id=e,this.description=t,this.date=i}}class p extends HTMLElement{static get observedAttributes(){return["prefix"]}constructor(){super(),this.wrapper=document.getElementById("note-section"),this.sectionTitleBaseTpl=document.querySelector(".section-header").innerHTML.toString(),this.cardBaseTpl=this.wrapper.querySelector(".base-template-card").innerHTML.toString(),this.isSingle=s(),this.isHome=n(),this.note={},this.noteStorage=i("note")?i("note"):[],this.formData=[],this.singleNote={}}connectedCallback(){console.log(h,"NoteConfig"),this.init()}disconnectedCallback(){}attributeChangedCallback(e,t,i){}init(){this.isHome||document.body.classList.add("notes"),this.sectionTitleBaseTpl&&this.cardBaseTpl&&(this.getOneSingle(),this.compileSection(),this.compileCard(),this.addOneNote())}compileSection(){let e;e=this.isHome?"Note":this.isSingle?`Note #${this.singleNote.storageIndex+1}`:"All";const t=this.sectionTitleBaseTpl.replace("{{section_title}}",e);this.wrapper.querySelector(".dynamic.section-header").innerHTML=t}compileCard(){this.isSingle?(this.handleButtons(),this.noteStorage.forEach((t=>{if(this.isSingle==t.id){let i=this.cardBaseTpl.replace("{{id}}",t.id);i=i.replace("{{link}}",`/notes.html?id=${t.id}`),i=i.replace("{{description}}",t.description),i=i.replace("{{date}}",e(t.date)),i=i.replace("{{template}}"," single"),this.innerHTML+=i}}))):this.noteStorage.forEach(((t,i)=>{let s=this.cardBaseTpl.replace("{{id}}",t.id);s=s.replace("{{link}}",`/notes.html?id=${t.id}`),s=s.replace("{{description}}",`Note #${i+1}`),s=s.replace("{{date}}",e(t.date)),s=s.replace("{{template}}",""),this.innerHTML+=s}))}getOneSingle(){this.isSingle&&this.noteStorage.forEach(((e,t)=>{this.isSingle==e.id&&(e.storageIndex=t,this.singleNote=e)}))}addOneNote(){this.isHome||document.querySelector(".button-add").addEventListener("click",(()=>{const e=document.querySelector(".form-wrapper.create");e.classList.add("active"),this.handleForm(e)}))}editOneNote(){const e=document.querySelector(".form-wrapper.edit");e.classList.add("active"),this.handleFormEdit(e)}removeOneNote(){this.noteStorage.forEach(((e,t)=>{this.isSingle==e.id&&(this.noteStorage.splice(t,1),this.updateStorage(),window.location="notes.html")}))}handleButtons(){document.querySelector(".button-list").querySelectorAll(".button").forEach((e=>{e.classList.contains("button-add")?e.classList.add("hidden"):e.classList.remove("hidden"),e.classList.contains("button-remove")&&e.addEventListener("click",(()=>{this.removeOneNote()})),e.classList.contains("button-edit")&&e.addEventListener("click",(()=>{this.editOneNote()}))}))}handleForm(e){const t=e.querySelectorAll(".form-field");let i=e.querySelector("form");i.addEventListener("submit",(t=>{t.preventDefault();const s=new FormData(i);if(s.get("description").length>2){let t=Date.now();this.note=new h(t,s.get("description"),Date.now()),i.reset(),e.classList.remove("active"),this.noteStorage.push(this.note),this.updateStorage()}})),i.addEventListener("formdata",(e=>{const t=e.formData;t.set("description",t.get("description").toLowerCase())})),t.forEach((i=>{const s=i.querySelector(".form-button"),n=i.querySelector(".input");s.addEventListener("click",(i=>{if(i.preventDefault(),n.value.length>2&&"continue"==s.dataset.action){let e=parseInt(s.dataset.index);t[e].classList.remove("active"),t[e+1].classList.add("active")}else e.querySelector('button[type="submit"]').click()}))}))}handleFormEdit(e){const t=e.querySelectorAll(".form-field");let i=e.querySelector("form");e.querySelector("textarea").value=this.singleNote.description,i.addEventListener("submit",(t=>{t.preventDefault();const s=new FormData(i);s.get("description").length>2&&(this.singleNote.description=s.get("description"),this.noteStorage[this.singleNote.storageIndex]=this.singleNote,i.reset(),e.classList.remove("active"),this.updateStorage())})),i.addEventListener("formdata",(e=>{const t=e.formData;t.set("title",t.get("title").toLowerCase())})),t.forEach((i=>{const s=i.querySelector(".form-button"),n=i.querySelector(".input");s.addEventListener("click",(i=>{if(i.preventDefault(),console.log(n),n.value.length>2&&"continue"==s.dataset.action){let e=parseInt(s.dataset.index);t[e].classList.remove("active"),t[e+1].classList.add("active")}else e.querySelector('button[type="submit"]').click()}))}))}updateStorage(){t("note",JSON.stringify(this.noteStorage)),window.location.reload()}}customElements.define("note-task",p);const u=[{name:"Oignons",typeId:0},{name:"Rocamadour",typeId:4},{name:"Pâte Brisée",typeId:4},{name:"Farine",typeId:1},{name:"Levure Chimique",typeId:1},{name:"Sucre",typeId:1},{name:"Lait",typeId:4},{name:"Oeuf",typeId:4},{name:"Beurre",typeId:4},{name:"Sel",typeId:0},{name:"Harissa",typeId:0},{name:"Huile d'Olive",typeId:0},{name:"Parika fumé",typeId:0},{name:"Ras el hanout",typeId:0},{name:"Cumin",typeId:0},{name:"Miel",typeId:1},{name:"Pâtes",typeId:0},{name:"Coques",typeId:5},{name:"Encornets",typeId:5},{name:"Tomates cerises",typeId:3},{name:"Oignon rouge",typeId:0},{name:"Citron",typeId:3},{name:"Piments séchés",typeId:0},{name:"Coulis de tomate",typeId:0},{name:"Ail",typeId:0},{name:"Persil",typeId:0},{name:"Pâte feuilletée",typeId:0},{name:"Vinaigre balsamique",typeId:0},{name:"Thym",typeId:0},{name:"Pignons de pin",typeId:0},{name:"Ricotta",typeId:4},{name:"Pommes de terre",typeId:2},{name:"Crème fraiche",typeId:4},{name:"Bacon végé",typeId:0},{name:"Lardon végé",typeId:0},{name:"Fromage râpé",typeId:4},{name:"Concombre",typeId:2},{name:"Graines de sésame",typeId:0},{name:"Thon en conserve",typeId:0},{name:"St Moret",typeId:4},{name:"Ciboulette",typeId:0},{name:"Sauce soja salé",typeId:0},{name:"Sauce soja sucré",typeId:0},{name:"Feta",typeId:4},{name:"Tahini",typeId:0},{name:"Origan",typeId:0},{name:"Herbes de provence",typeId:0},{name:"Poivre",typeId:0},{name:"Courgette",typeId:2},{name:"Reblochon",typeId:4},{name:"Crème semi-épaisse",typeId:4},{name:"Crème liquide",typeId:4},{name:"Muscade",typeId:0},{name:"Ail en poudre",typeId:0},{name:"Mozzarella",typeId:4},{name:"Yaourt grec",typeId:4},{name:"Basilic",typeId:0},{name:"Menthe",typeId:0},{name:"Brocolis",typeId:2},{name:"Jaunes d'oeufs",typeId:4},{name:"Blancs d'oeufs",typeId:4},{name:"Tomate",typeId:3},{name:"Avocat",typeId:3},{name:"Mayonnaise",typeId:0},{name:"Sriracha",typeId:0},{name:"Maïs en conserve",typeId:0},{name:"Riz à sushi",typeId:0},{name:"Riz à risotto",typeId:0},{name:"Feuille de riz",typeId:0},{name:"Vin blanc",typeId:0},{name:"Épinards",typeId:2},{name:"Bouillon de légumes",typeId:0},{name:"Noix",typeId:0},{name:"Échalotte",typeId:0},{name:"Champignons",typeId:2},{name:"Gorgonzola",typeId:4},{name:"Purée de cacahuètes",typeId:1},{name:"Piment",typeId:0},{name:"Vinaigre de riz",typeId:0},{name:"Nouilles",typeId:0},{name:"Concentré de tomate",typeId:0},{name:"Poivron",typeId:0}],m=[{id:0,name:"Épicerie salée"},{id:1,name:"Épicerie sucrée"},{id:2,name:"Légumes"},{id:3,name:"Fruits"},{id:4,name:"Crèmerie"},{id:5,name:"Poissonerie"}];class g{constructor(e,t,i,s,n,a){this.id=e,this.title=t,this.ingredients=i,this.infos=s,this.description=n,this.date=a}}class y{constructor(e,t,i){this.ingredient=e,this.quantity=t,this.unit=i}}class S{constructor(e,t){this.type=e,this.info=t}}class f extends HTMLElement{static get observedAttributes(){return["prefix"]}constructor(){super(),this.wrapper=document.getElementById("recipe-section"),this.sectionTitleBaseTpl=document.querySelector(".section-header").innerHTML.toString(),this.cardBaseTpl=this.wrapper.querySelector(".base-template-card").innerHTML.toString(),this.isSingle=s(),this.isHome=n(),this.recipe={},this.ingredientsData=u,this.flattenedIngredientsData=u.flatMap((e=>e.name)),this.recipeIngredients=[],this.recipeInfos=[],this.recipeStorage=i("recipe")?i("recipe"):[],this.formData=[],this.singleRecipe={},this.currentIngredient={}}connectedCallback(){console.log(g,"RecipeConfig"),console.log(m,"types"),console.log(u,"ingredients"),console.log(y,"IngredientConfig"),this.init()}disconnectedCallback(){}attributeChangedCallback(e,t,i){}init(){console.log(this.flattenedIngredientsData,"flattenedIngredientsData"),this.isHome||document.body.classList.add("recipes"),this.sectionTitleBaseTpl&&this.cardBaseTpl&&(this.getOneSingle(),this.compileSection(),this.compileCard(),this.addOneRecipe())}compileSection(){let e;e=this.isHome?"Recipe":this.isSingle?this.singleRecipe.title:"All";const t=this.sectionTitleBaseTpl.replace("{{section_title}}",e);this.wrapper.querySelector(".dynamic.section-header").innerHTML=t}compileCard(){this.isSingle?(this.handleButtons(),this.recipeStorage.forEach((t=>{let i=t.description&&t.description.length>2?t.description:"";if(this.isSingle==t.id){let s=this.cardBaseTpl.replace("{{id}}",t.id);s=s.replace("{{title}}",t.title),s=s.replace("{{date}}",e(t.date)),s=s.replace("{{template}}"," single"),s=s.replace("{{ingredients}}",this.compileIngredients()),s=s.replace("{{infos}}",this.compileInfos()),s=s.replace("{{description}}",i),this.innerHTML+=s}}))):this.recipeStorage.forEach((t=>{let i=this.cardBaseTpl.replace("{{id}}",t.id);i=i.replace("{{link}}",`/recipes.html?id=${t.id}`),i=i.replace("{{title}}",t.title),i=i.replace("{{date}}",e(t.date)),i=i.replace("{{template}}",""),this.innerHTML+=i}))}compileIngredients(){let e="";if(console.log(this.singleRecipe.ingredients),this.singleRecipe.ingredients.length>0)for(let t of this.singleRecipe.ingredients){let i="none"==t.unit?"":t.unit;e+=`<li class="card-ingredient"><span class="text-cursive">></span><span>${t.quantity} ${i} ${t.ingredient.name}</span></li>`}return e}compileInfos(){let e="";if(console.log(this.singleRecipe.infos),this.singleRecipe.infos.length>0)for(let t of this.singleRecipe.infos)e+=`<li class="card-info"><i class="${t.type}"></i><span>${t.info}</span></li>`;return e}getOneSingle(){this.isSingle&&this.recipeStorage.forEach(((e,t)=>{this.isSingle==e.id&&(e.storageIndex=t,this.singleRecipe=e)}))}addOneRecipe(){this.isHome||document.querySelector(".button-add").addEventListener("click",(()=>{const e=document.querySelector(".form-wrapper.create");e.classList.add("active"),this.handleForm(e)}))}removeOneRecipe(){this.recipeStorage.forEach(((e,t)=>{this.isSingle==e.id&&(this.recipeStorage.splice(t,1),this.updateStorage(),window.location="recipes.html")}))}handleButtons(){document.querySelector(".button-list").querySelectorAll(".button").forEach((e=>{e.classList.contains("button-add")?e.classList.add("hidden"):e.classList.remove("hidden"),e.classList.contains("button-remove")&&e.addEventListener("click",(()=>{this.removeOneRecipe()}))}))}handleForm(e){const t=e.querySelectorAll(".form-field");let i=e.querySelector("form");i.addEventListener("submit",(t=>{t.preventDefault();const s=new FormData(i);if(s.get("title").length>2&&s.get("ingredients").length>2&&s.get("infos").length>2&&s.get("description").length>2){let t=Date.now();this.recipe=new g(t,s.get("title"),JSON.parse(s.get("ingredients")),JSON.parse(s.get("infos")),s.get("description"),Date.now()),this.resetForm(i),e.classList.remove("active"),this.recipeStorage.push(this.recipe),this.updateStorage()}})),i.addEventListener("formdata",(e=>{const t=e.formData;t.set("title",t.get("title").toLowerCase()),t.set("ingredients",t.get("ingredients").toLowerCase()),t.set("infos",t.get("infos").toLowerCase()),t.set("description",t.get("description").toLowerCase())})),t.forEach((i=>{const s=i.querySelector(".form-button"),n=i.querySelector(".input"),a=i.querySelector(".subform-button"),r=i.querySelector("#ingredient"),l=i.querySelector(".quantity-wrapper-buttons"),o=i.querySelector("#quantity"),c=i.querySelector("#unit"),d=i.querySelector(".ingredients-list"),h=i.querySelector("#type"),p=i.querySelector("#info"),u=i.querySelector(".infos-list");if(r&&l&&o&&a&&d&&n&&c){const t=i.querySelector(".ingredient-base-template").innerHTML.toString(),s=i.querySelector(".search-dropdown"),h=l.querySelector(".more"),p=l.querySelector(".less");r.addEventListener("focus",(()=>{s.classList.add("active")})),r.addEventListener("keyup",(e=>{if(e.target.value.length>2)for(let t of this.flattenedIngredientsData)t.toLowerCase().includes(e.target.value.toLowerCase())&&(s.innerHTML=`<span>${t}</span>`,s.dispatchEvent(new CustomEvent("feed")))})),s.addEventListener("feed",(e=>{s.querySelectorAll("span").forEach((e=>{e.addEventListener("click",(()=>{r.value=e.textContent,s.classList.remove("active");for(let t of this.ingredientsData)t.name.toLowerCase()==e.textContent.toLowerCase()&&(this.currentIngredient=t)}))}))})),p.addEventListener("click",(()=>{parseInt(o.value)>0&&(o.value=parseInt(o.value)-1)})),h.addEventListener("click",(()=>{o.value=parseInt(o.value)+1})),a.addEventListener("click",(()=>{if(parseInt(o.value)>0){this.recipeIngredients.push(new y(this.currentIngredient,parseInt(o.value),c.value));let i=t.replace("{{quantity}}",o.value.toString()),a="none"==c.value?"":c.value;i=i.replace("{{ingredient_title}}",this.currentIngredient.name),i=i.replace("{{unit}}",a),d.innerHTML+=i,e.style.height=e.getBoundingClientRect().height+24+"px",n.value=JSON.stringify(this.recipeIngredients),this.currentIngredient={},s.innerHTML="",o.value=0,c.value="none",r.value="",console.log(this.recipeIngredients)}}))}if(h&&p&&a&&n&&u){const t=i.querySelector(".info-base-template").innerHTML.toString();a.addEventListener("click",(()=>{if(h.value.length>2&&p.value.length>2){this.recipeInfos.push(new S(h.value,p.value));let i=t.replace("{{type}}",h.value);i=i.replace("{{info}}",p.value),u.innerHTML+=i,e.style.height=e.getBoundingClientRect().height+24+"px",n.value=JSON.stringify(this.recipeInfos),p.value=""}}))}s.addEventListener("click",(i=>{if(i.preventDefault(),n.value.length>2&&"continue"==s.dataset.action){e.removeAttribute("style");let i=parseInt(s.dataset.index);t[i].classList.remove("active"),t[i+1].classList.add("active")}else e.querySelector('button[type="submit"]').click()}))}))}resetForm(e){e.reset(),this.recipeIngredients=[],this.recipeInfos=[]}updateStorage(){t("recipe",JSON.stringify(this.recipeStorage)),window.location.reload()}}customElements.define("recipe-task",f);class L{constructor(e,t,i){this.id=e,this.decription=t,this.url=i}}class v extends HTMLElement{static get observedAttributes(){return["prefix"]}constructor(){super(),this.wrapper=document.getElementById("inspiration-section"),this.sectionTitleBaseTpl=document.querySelector(".section-header").innerHTML.toString(),this.isSingle=s(),this.isHome=n()}connectedCallback(){console.log(L,"InspiConfig"),this.init()}disconnectedCallback(){}attributeChangedCallback(e,t,i){}init(){this.sectionTitleBaseTpl&&this.compileSection()}compileSection(){let e;e=this.isHome?"Inspirations":this.isSingle?"Titre de la tâche":"Work in progress";const t=this.sectionTitleBaseTpl.replace("{{section_title}}",e);this.wrapper.querySelector(".dynamic.section-header").innerHTML=t}compileCard(){}}customElements.define("inspiration-task",v);class k{constructor(e,t,i,s,n){this.id=e,this.title=t,this.type=i,this.url=s,this.date=n}}class I extends HTMLElement{static get observedAttributes(){return["prefix"]}constructor(){super(),this.wrapper=document.getElementById("link-section"),this.sectionTitleBaseTpl=document.querySelector(".section-header").innerHTML.toString(),this.cardBaseTpl=this.wrapper.querySelector(".base-template-card").innerHTML.toString(),this.isSingle=s(),this.isHome=n(),this.link={},this.linkStorage=i("link")?i("link"):[],this.typeStorage=i("type")?i("type"):[],this.formData=[],this.formData=[],this.singleLink={}}connectedCallback(){console.log(k,"LinkConfig"),this.init()}disconnectedCallback(){}attributeChangedCallback(e,t,i){}init(){this.isHome||document.body.classList.add("links"),this.sectionTitleBaseTpl&&this.cardBaseTpl&&(this.handleTypeSelect(),this.getOneSingle(),this.compileSection(),this.compileCard(),this.addOneLink())}compileSection(){let e;e=this.isHome?"Link":this.isSingle?this.singleLink.title:"All";const t=this.sectionTitleBaseTpl.replace("{{section_title}}",e);this.wrapper.querySelector(".dynamic.section-header").innerHTML=t}compileCard(){this.isSingle?(this.handleButtons(),this.linkStorage.forEach((t=>{if(this.isSingle==t.id){let i=this.cardBaseTpl.replace("{{id}}",t.id);i=i.replace("{{link}}",t.url),i=i.replace("{{target}}","_blank"),i=i.replace("{{title}}",t.title),i=i.replace("{{type}}",t.type),i=i.replace("{{date}}",e(t.date)),i=i.replace("{{template}}",""),this.innerHTML+=i}}))):this.linkStorage.forEach((t=>{let i=this.cardBaseTpl.replace("{{id}}",t.id);i=i.replace("{{link}}",`/links.html?id=${t.id}`),i=i.replace("{{target}}","_self"),i=i.replace("{{title}}",t.title),i=i.replace("{{date}}",e(t.date)),i=i.replace("{{template}}",""),i=i.replace("{{type}}",t.type),this.innerHTML+=i}))}compileTasks(e){const t=this.querySelector(".card .card-content>ul");let i="";for(const t of e)i+=`<li>${t.title}</li>`;t.innerHTML=i}getOneSingle(){this.isSingle&&this.linkStorage.forEach(((e,t)=>{this.isSingle==e.id&&(e.storageIndex=t,this.singleLink=e)}))}addOneLink(){this.isHome||document.querySelector(".button-add").addEventListener("click",(()=>{const e=document.querySelector(".form-wrapper.create");e.classList.add("active"),this.handleForm(e)}))}removeOneLink(){this.linkStorage.forEach(((e,t)=>{this.isSingle==e.id&&(this.linkStorage.splice(t,1),this.updateStorage(),window.location="links.html")}))}handleButtons(){document.querySelector(".button-list").querySelectorAll(".button").forEach((e=>{e.classList.contains("button-add")?e.classList.add("hidden"):e.classList.remove("hidden"),e.classList.contains("button-remove")&&e.addEventListener("click",(()=>{this.removeOneLink()}))}))}handleTypeSelect(){if(this.typeStorage.length>0){const e=document.querySelector("select");e&&this.typeStorage.forEach((t=>{e.innerHTML=`<option>${t}</option>`}))}}handleForm(e){const i=e.querySelectorAll(".form-field");let s=e.querySelector("form");s.addEventListener("submit",(t=>{t.preventDefault();const i=new FormData(s);if(i.get("title").length>2&&i.get("url").length>2&&i.get("type").length>2){let t=Date.now();this.link=new k(t,i.get("title"),i.get("type"),i.get("url"),Date.now()),s.reset(),e.classList.remove("active"),this.linkStorage.push(this.link),this.updateStorage()}})),s.addEventListener("formdata",(e=>{const t=e.formData;t.set("title",t.get("title").toLowerCase()),t.set("type",t.get("type").toLowerCase()),t.set("url",t.get("url").toLowerCase())})),i.forEach((s=>{const n=s.querySelector(".form-button"),a=s.querySelector(".input"),r=s.querySelector(".subform-button"),l=s.querySelector("select"),o=s.querySelector("#addtype");r&&l&&o&&r.addEventListener("click",(e=>{e.preventDefault(),o.value.length>2&&(l.innerHTML=`<option value="${o.value.toLowerCase()}">${o.value}</option>`,!this.typeStorage.indexOf(o.value.toLowerCase())>-1&&(this.typeStorage.push(o.value.toLowerCase()),t("type",JSON.stringify(this.typeStorage))))})),n.addEventListener("click",(t=>{if(t.preventDefault(),a.value.length>2&&"continue"==n.dataset.action){let e=parseInt(n.dataset.index);i[e].classList.remove("active"),i[e+1].classList.add("active")}else e.querySelector('button[type="submit"]').click()}))}))}updateStorage(){t("link",JSON.stringify(this.linkStorage)),window.location.reload()}}customElements.define("link-task",I)})();